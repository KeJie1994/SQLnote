<html>
<head>
  <title>第九章 迭代器模式</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1462"/>
<h1>第九章 迭代器模式</h1>

<div>
<span><div>第九章 迭代器模式</div><div>1.早餐菜单利用ArrayList,午餐菜单利用数组。</div><div>  使用迭代器模式：它依赖于名为迭代器的接口，然后让相关的部分(菜单的迭代器）实现该迭代器。提供了一种方法顺序访问一个聚合对象的各个元素，同时又不暴露内部的表示。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public interface Iterator</div><div>{</div><div>    boolean hasNext();</div><div>    Object next();</div><div>}</div><div>//早餐和午餐的具体书库结构实现这个接口</div><div>public class DinerMenuIteraotr implements Iterator</div><div>{</div><div><span>    MenuItem[] items;</span><br/></div><div><span><span>    int position=0;</span><br/></span></div><div><span><span>    public DinerMenuIterator(MenuItem[] items)</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    this.items=items;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public Object next()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    MenuItem menuitem=items[position];</span><br/></span></div><div><span><span>    </span><span>    position=position+1;</span><br/></span></div><div><span><span>    </span><span>    return menuitem;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public boolean hasNext()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    if(position&gt;=items.length||items[postion]==null)</span><br/></span></div><div><span><span>    </span><span>    </span><span>    return false;</span><br/></span></div><div><span><span>    </span><span>    else</span><br/></span></div><div><span><span>    </span><span>    </span><span>    return true;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div>}</div><div><br/></div><div>public class PancakeHouseMenIterator implements Iterator</div><div>{</div><div><span>    ArrayList items;</span><br/></div><div><span><span>    int position=0;</span><br/></span></div><div><span><span>    public PancakeHouseIterator(ArrayList items)</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    this.items=items;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public Object next()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    Object object=items.get(position);</span><br/></span></div><div><span><span>    </span><span>    position=position+1;</span><br/></span></div><div><span><span>    </span><span>    return object;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public boolean hasNext()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    if(position&gt;=items.size())</span><br/></span></div><div><span><span>    </span><span>    </span><span>    return false;</span><br/></span></div><div><span><span>    </span><span>    else</span><br/></span></div><div><span><span>    </span><span>    </span><span>    return true;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div>}</div><div><br/></div><div>//这样我们将游走的任务放在了迭代器上，而不是具体的聚合上。</div><div>//早餐</div><div>public class PancakeHouseMenu</div><div>{</div><div><span>    ArrayList menuItems;</span><br/></div><div><span><span>    public PancakeHouseMenu()</span><br/></span></div><div><span>    {</span><br/></div><div><span>    </span><span>    addItem(&quot;K&amp;B's Pancake Breakfast&quot;,&quot;Pancakes with scrambled eggs,and toast&quot;,true,2.99);</span></div><div><span><span>    </span><span>    addItem(&quot;Regulat Pancake Breakfast&quot;,&quot;Pancake with fried eggs sausage&quot;,false,2.99);</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public void addItem(String name,String description,boolean vegetarian,double price)</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    MenuItem menuItem=new MenuItem(name,decsription,vegetarian,price);</span><br/></span></div><div><span><span>    </span><span>    menuItems.add(menuItem);</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public ArrayList getMenuItems()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    return menuItems;</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span><span>    public Iterator createIterator()<span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//迭代器工厂方法</span></span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    return new PanckeHouseMenuIterator(menuItems);</span><br/></span></div><div><span><span>    }</span><br/></span></div><div>}</div><div>//午餐</div><div>public class DinerMenu</div><div>{</div><div><span>    static final int MAX_ITEMS=6;</span><br/></div><div><span><span>    int numberofItems=0;</span><br/></span></div><div><span><span>    MenuItems[] menuitems;</span><br/></span></div><div><span><span>    public DinerMenu()</span><br/></span></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    menuItems=new MenuItems[MAX_ITEMS];</span><br/></span></div><div><span><span>    </span><span>    addItem(&quot;Vegetarian BLT&quot;,&quot;Bacaon with lettuce &amp; tomato&quot;true,2.99);</span><br/></span></div><div><span><span>    </span><span>    addItem(&quot;Soup of the day&quot;,&quot;Soup of the day with a side of potato&quot;，false,2.99);</span><br/></span></div><div><span><span>    }</span><br/></span></div><div><span>    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public void addItem(String name,String description,boolean vegetarian,double price)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">   <span>    </span> {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       <span>    </span> MenuItem menuItem=new MenuItem(name,decsription,vegetarian,price);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       <span>    </span> if(numberofItems&gt;=MAX_Items)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span>    </span><span>    </span><span>    </span><span>    System.err.println(&quot;Sorry,menu is full&quot;);</span><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    </span><span>    </span><span>    else</span><br/></span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    </span><span>    </span><span>     </span><span> {</span><br/></span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    </span><span>    </span><span>    </span><span>    </span><span>    menuItems[numberofItems]=menuItem;</span><br/></span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    </span><span>    </span><span>    </span><span>    </span><span>    numberofItems+=1;</span><br/></span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    </span><span>    </span><span>    </span><span>  }</span><br/></span></span></div><div><span>    }</span><br/></div><div><span>    public Iterator createIterator()//迭代器工厂方法</span><br/></div><div><span><span>    {</span><br/></span></div><div><span><span>    </span><span>    return new DinerMenuIterator(menuItems);</span><br/></span></div><div><span><span>    }</span><br/></span></div><div>}</div><div><br/></div><div>//服务员</div><div><span style="text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">public class Waitress </span></div><div><span style="text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">{</span></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    //原书中的第一个例子就是这么写的，而且它自己也指出了可以面向接口Menu编程，进行统一定义，不过不知道为何它在第二个例子     中才使用，其实在第一个例子中就直接面向接口将这些定义转化为Menu</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> </span></div><div><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    PancakeHouseMenu pancakeHouseMenu; </span><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> </span></div><div><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    DinerMenu dinerMenu;</span><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public Waitress(</span><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">PancakeHouseMenu</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> pancakeHouseMenu, </span><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">DinerMenu</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> dinerMenu)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        this.pancakeHouseMenu = pancakeHouseMenu; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        this.dinerMenu = dinerMenu; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void printMenu() </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        Iterator pancakeIterator = pancakeHouseMenu.createIterator();//面向接口编程</span><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">        Iterator dinerIterator = dinerMenu.createIterator();</span></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        System.out.println(&quot;MENU/n----/nBREAKFAST&quot;); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        printMenu(pancakeIterator); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        System.out.println(&quot;/nLUNCH&quot;); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        printMenu(dinerIterator); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    private void printMenu(Iterator iterator)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">     { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        while (iterator.hasNext()) </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            MenuItem menuItem = (MenuItem)iterator.next(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            System.out.print(menuItem.getName() + &quot;, &quot;); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            System.out.print(menuItem.getPrice() + &quot; -- &quot;); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            System.out.println(menuItem.getDescription()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void printVegetarianMenu()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        printVegetarianMenu(pancakeHouseMenu.createIterator()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        printVegetarianMenu(dinerMenu.createIterator()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public boolean isItemVegetarian(String name) </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        Iterator breakfastIterator = pancakeHouseMenu.createIterator(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        if (isVegetarian(name, breakfastIterator)) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            return true; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        Iterator dinnerIterator = dinerMenu.createIterator(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        if (isVegetarian(name, dinnerIterator)) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            return true; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        return false; </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">    }</span></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    private void printVegetarianMenu(Iterator iterator)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        while (iterator.hasNext()) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            MenuItem menuItem = (MenuItem)iterator.next(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            if (menuItem.isVegetarian()) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                System.out.print(menuItem.getName()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                System.out.println(&quot;/t/t&quot; + menuItem.getPrice()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                System.out.println(&quot;/t&quot; + menuItem.getDescription()); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        } </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">    }</span></div><p style="margin: 10px auto; padding: 0px; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    private boolean isVegetarian(String name, Iterator iterator) </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        while (iterator.hasNext()) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            MenuItem menuItem = (MenuItem)iterator.next(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            if (menuItem.getName().equals(name)) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                if (menuItem.isVegetarian()) { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    return true; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        } </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        return false; </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    } </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;">//测试</div><div style="margin-top: 1em; margin-bottom: 1em;"></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class MenuTestDrive</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public static void main(String args[])</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span>    </span> { </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        PancakeHouseMenu pancakeHouseMenu = new PancakeHouseMenu(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        DinerMenu dinerMenu = new DinerMenu(); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        Waitress waitress = new Waitress(pancakeHouseMenu, dinerMenu); </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        waitress.printMenu(); </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">    }</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">}</span></div></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">这样看上去代码是增加了不少，但是对于两个本来写好的类（PancakeHouseMenu和DinerMenu），我们只在其中加入了createIterator这个方法，系统的耦合性很低。此时女招待这个类就不需要知道菜单具体的实现了，并且实现迭代器后我们只需一个循环就可以遍历了。</span></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div>2.其实java就有迭代器，直接继承迭代器接口就行</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public class DinerMenuIterator implements Iterator</div><div>{</div><div><span>  <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">MenuItem[] items;</span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    int position=0;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public DinerMenuIterator(MenuItem[] items)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        this.items=items;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public Object next()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        MenuItem menuitem=items[position];</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        position=position+1;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        return menuitem;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public boolean hasNext()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        if(position&gt;=items.length||items[postion]==null)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            return false;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        else</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            return true;</span></div><div><br/><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span>    public void remove()</span><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    {</span><br/></span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span>         <span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">throw new UnsupportedOperationException(</span><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"> </span></span></span></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">            &quot;Alternating Diner Menu Iterator does not support remove()&quot;);</span><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span><span>    }</span><br/></span></span></div><div>}</div><div><br/></div><div>//我们发现在两个菜单中有一个共同的方法createIterator,可以使两者统一起来</div><div>public interface Menu</div><div>{</div><div><span>    public Iterator createIterator();</span><br/></div><div>}</div><div>public class PancakeHouseMenu implements Menu</div><div>{</div><div><span>    </span><span>    </span><br/></div><div>}</div><div>public class DinerMenu implements Menu</div><div>{</div><div><br/></div><div>}</div></div><div><br/></div><div>3.单一原则： <span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.92px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">个类应该只有一个引起变化的原因，类的每个职责都有改变的潜在区域，一旦超过职责就意味着超过“一个改变”的区域。</span></div></span>
</div></body></html> 