<html>
<head>
  <title>第一章 策略模式</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1436"/>
<h1>第一章 策略模式</h1>

<div>
<span><div>第一章 策略模式</div><div><br/></div><div><br/></div><div>1.例如鸭子类的设计，有些鸭子会飞有些不会，有些会叫有些不会。假如用继承可能会继承下不该有的功能呢，利用接口不能实现代码复用。</div><div>设计原则：找出应用中变化的部分，把他们独立出来，封装起来，让不变化的部分不受影响。</div><div><br/></div><div>2.希望在运行时动态改变一些行为，第二个原则：针对接口编程，不是针对实现编程。</div><div>鸭子的行为被放在一个分开的类---行为类，此类专门提供某行为接口的实现。</div><div>针对接口编程意思意味着针对超类编程---变量的声明为一个超类，通常是一个接口或者一个抽象类，只要实现此超类产生的对象，都可以指定给这个变量，这意味着，声明类时不用理会以后执行时的真正对象类。</div><div><br/></div><div>3.各种鸭子继承Duck，飞行行为实现了FlyBehavior接口，呱呱叫行为实现了QuackBehavior接口，设计的理念不在于继承而来而在于通过适当的行为对象组合而来。第三个原则：多用组合，少用继承，这样可以使系统更具有弹性。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//鸭子类的设计</div><div><br/></div><div>//fly行为</div><div>//飞行接口</div><div>public interface FlyBehavior</div><div>{</div><div>    public void fly();</div><div>}</div><div>//飞</div><div>public class FlyWithWings implements FlyBehavior</div><div>{</div><div>    public void fly()</div><div>    {</div><div>        System.out.println(&quot;用翅膀飞&quot;);</div><div>    }</div><div>}</div><div>//不飞</div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class FlyNoWay implements FlyBehavior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void fly()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        System.out.println(&quot;不飞&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//坐火箭飞</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class FlyRocketPowered implements FlyBehavior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void fly()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        System.out.println(&quot;坐火箭飞&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//quack行为</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//叫接口</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public interface QuackBehavior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void quack();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//吱吱叫</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class Squeak implements QuackBehvior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void quack()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        System.out.println(&quot;吱吱叫&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//嘎嘎叫</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class Quack implements QuackBehvior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void quack()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    System.out.println(&quot;嘎嘎叫&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div>//不叫</div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class MuteQucak implements QuackBehvior</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void quack()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    System.out.println(&quot;不叫&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//实现Duck类</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//Duck超类</span></div><div><font face="Monaco">public abstract class Duck</font></div><div><font face="Monaco">{</font></div><div><font face="Monaco">    FlyBehavior flyBehavior;</font></div><div><font face="Monaco">    QuackBehavior quackBehavior;</font></div><div><font face="Monaco">    public void setFlyBehavior(FlyBehavior fb)</font></div><div><font face="Monaco">    {</font></div><div><font face="Monaco">        this.flyBehavior=fb;</font></div><div><font face="Monaco">    }</font></div><div><font face="Monaco">    public void setQuackBehavior(QuackBehavior qb)</font></div><div><font face="Monaco">    {</font></div><div><font face="Monaco">        this.quack Behavior=qb;</font></div><div><font face="Monaco">    }</font></div><div>  abstract void display();</div><div>  public void performFly()</div><div>  {</div><div>     flyBehavior.fly();</div><div>  }</div><div>  public void performQuack()</div><div>  {</div><div>     quackBehavior.fly();</div><div>  }</div><div>  public void swim()</div><div>  {</div><div>    System.out.println(&quot;正在游泳&quot;）;</div><div>  }</div><div><font face="Monaco">}</font></div><div><br/></div><div><br/></div><div><font face="Monaco">//野鸭</font></div><div><font face="Monaco">public class MallarDuck extends Duck</font></div><div><font face="Monaco">{</font></div><div><font face="Monaco">    public MallarDuck(）</font></div><div><font face="Monaco">    {</font></div><div><font face="Monaco">        quackBehavior=new Quack();</font></div><div><font face="Monaco">        flyBehavior=new FlyWithWings();</font></div><div><font face="Monaco">    }</font></div><div><font face="Monaco">    public void  display()</font></div><div><font face="Monaco">    {</font></div><div><font face="Monaco">        System.out.println(&quot;绿头鸭&quot;);</font></div><div><font face="Monaco">    }</font></div><div><font face="Monaco">}</font></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//红头鸭</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class RedHeadDuck extends Duck</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">RedHeadDuck</span>(）</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    quackBehavior=new Quack();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    flyBehavior=new FlyWithWings();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void  display()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    System.out.println(&quot;红头鸭&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//橡皮鸭</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class RubberDuck extends Duck</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">RubberDuck</span></span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(）</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    quackBehavior=new Squeak();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    flyBehavior=new FlyNoWay();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void  display()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    System.out.println(&quot;橡皮鸭&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//模型鸭</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class ModelDuck extends Duck</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">ModelDuck</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(）</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    quackBehavior=new Quack();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    flyBehavior=new FlyNoWay();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public void  display()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    System.out.println(&quot;模型鸭&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><br/></div><div>//测试代码</div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">public class MiniDuckSimulator</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"> {</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    public static void main(String[] args)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">     {</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        MallardDuck mallard = new MallardDuck();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        RubberDuck rubberDuckie = new RubberDuck();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        RedHeadDuck redHeadDuck = new RedHeadDuck();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        ModelDuck model = new ModelDuck();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        mallard.performQuack();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        rubberDuckie.performQuack();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        redHeadDuck.performQuack();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        model.performFly();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        model.setFlyBehavior(new FlyRocketPowered());</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        model.performFly();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><img src="第一章 策略模式_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div></span>
</div></body></html> 